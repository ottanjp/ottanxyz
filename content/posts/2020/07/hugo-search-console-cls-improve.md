---
title: HugoでSearch Consoleに追加された「ウェブに関する主な指標レポート」（CLS）の問題に対応する
date: 2020-07-03
tags:
  - Hugo
  - Google
categories:
  - Blog
slug: hugo-search-console-cls-improve
katex: false
---
![](/uploads/2020/07/screenshot-2020-07-03-20.28.33.png)

## Google Search Consoleに追加された新たな指標値

Google Search Consoleに新たな指標が追加されました。すべて、[ウェブに関する主な指標レポート](https://support.google.com/webmasters/answer/9205520?hl=ja)に記載の通りです。必ずしも早急な対処が必要なものではありません。ただし、これらの指標に対応することで、必然的にUI/UXの向上が期待できます。

* LCP (Largest Contentful Paint)
* FID (Fist Input Delay)
* CLS (Cumulative Layout Shift)

### LCP (Largest Contentful Paint)

LCPは、「ビューポート内に表示される**最大の画像またはテキストブロック**のレンダリング時間」を表し、[Largest Contentful Paint (LCP)](https://web.dev/lcp/#examples)に具体例が掲載されています。ビューポートは、「コンテンツが表示される範囲」を示します。ビューポートは、`<meta>`タグで明示的に指定可能です。

例えば、いわゆるレスポンシブなデザインを採用しているページでは、下記の指定をすることが多いでしょう。「コンテンツをデバイス（ブラウザ）の幅に合わせてレンダリングし、等倍で表示する」ことを表しています。ユーザーの操作による拡大・縮小を制限するものではないことに注意してください。ブラウザが、レンダリング時に描画する範囲を示しています。

```html
<meta name="viewport" content="width=device-width,initial-scale=1">
```

**「2.5秒」以内**に、「最大の画像」または「最大のテキストブロック」が表示されると良い、と（Googleは）定義しています。必ずしもすべての要素が表示されるまでの時間を示しているわけではないことに注意してください。表示されるページのレイアウトが決定されるまでの時間と捉えることもできます。ページが完全に表示されるまでの時間から、考え方がシフトしていることが分かりますね。

### FID (Fist Input Delay)

FIDは、定義を直訳すると「ユーザーが最初にページと対話した時（リンクをクリックした時、ボタンをタップした時、JavaScriptを使ったカスタムコントロールを使用した時など）から、ブラウザが実際にその対話に応答してイベントハンドラの処理を開始できるようになるまでの時間」です。

リンクやボタンをタップしても何の応答もない、もしくは応答がないように感じるページに遭遇したことはありませんか。ボタンをタップしたのかどうかもわからない、イライラしますよね。そのようなユーザーのイライラを抑えるために、イベント（クリックやタップ）を発火したタイミングから**「100ミリ秒」以内**に何らかの応答をせよ、ということです。

### CLS (Cumulative Layout Shift)

前置きが長くなりましたが、本記事の本題にようやく突入できました。CLSは、「読み込みフェーズにおけるページレイアウトの移動量を示します」とあります。[First Input Delay (FID)](https://web.dev/fid/)では、「ページの全ライフサイクルの間に発生する予期せぬレイアウトシフトのすべてについて、個々のレイアウトシフトスコアの合計を測定」とあります。同ページに掲載されているYouTubeの動画を見るのが、理解への近道です。

要は、**ページ読み込み中の「ぐらつき」の累積**を表します。

ショッピングサイトの決済画面を思い出してください。カートに入れた商品を確認する「注文内容の確認画面」、カートに入れた商品を注文する「注文内容の確定画面」があったとします。後者の画面では、最後に「確定」や「注文」ボタンを押しますよね。誤った注文をキャンセルしたい場合、「取り消し」「キャンセル」等のボタンを押すかもしれません。「確認画面」から「確定画面」へ遷移後、注文を取り消すために「キャンセル」ボタンを押したいとします。しかし、「確定画面」の読み込みが完全に終わっていない状態で、クリック、もしくはタップしようとしたところ、ボタンの上下に「邪魔な」広告等が表示されたため、誤って広告をクリック（誤クリック）してしまった経験はありませんか。もしくは、「キャンセル」しようとしたのに、誤って「確定」してしまったというケースも考えられるかもしれません。

これが、ページの「ぐらつき」です。細かな計算方法は割愛しますが、CLSはこの「ぐらつき」をなくしなさいという指標です。

## デスクトップ（パソコン）にのみCLSの警告が表示された



## 参考

* [Hugo Markdown Render Hooks 入門 - Qiita](https://qiita.com/peaceiris/items/afc9dc4f2a00d42fc043)