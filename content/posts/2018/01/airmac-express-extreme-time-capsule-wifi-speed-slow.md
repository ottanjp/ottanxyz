---
author: ottan
date: 2018-01-17 00:05:31+00:00
draft: false
title: AirMac（Express、Extreme、Time Capsule）の Wi-Fiの「体感の」速度が遅い問題を見直す
type: post
url: /airmac-express-extreme-time-capsule-wifi-speed-slow-6529/
categories:
    - iPhone
    - Mac
tags:
    - Wi-Fi
---

![](/uploads/2018/01/180116-5a5e802b9c111.jpg)

[Speedtest](http://www.speedtest.net/)等のインターネット接続テスト等で計測すると、実効速度は速いにもかかわらず、iPhone や Mac で以下のような体験をしたことはありませんか。

-   Safari で Google で検索、Web ページの表示時に最初の読み込みまでに時間がかかる
-   アプリケーション起動後のインターネット接続時に読み込みまでに時間がかかる
-   Instagram や LINE の読み込みが遅い

## Wi-Fi の体感速度が遅い場合に見直したい項目

自宅の環境は、以下の通りです。ISP（インターネットサービスプロバイダー）は「So-net（NURO 光）」です。ネットワーク接続構成は、ISP から提供されるルーター（終端装置：F660T）に、AirMac Time Capsule をブリッジ接続しています。Wi-Fi 経由でインターネット接続するデバイス（iPhone や Mac など）は、すべて AirMac Time Capsule で接続しています。

F660T を使用せずに AirMac をブリッジ接続している最大の理由は、同ルーターの無線 LAN 対応規格が 802.11a（最大転送速度 54Mbps！）に制限されるということでした。現在は So-net のカスタマーサポートに連絡することで、有償（¥10,800）で IEEE802.11ac に対応した最新のルーターに交換してもらえるようです。とりあえず AirMac Time Capsule が使用できるうちはこちらを使用しようと思っています。

### AirMac Time Capsule で体感速度が遅くなった時に見直した項目

ここ最近 Wi-Fi 接続時の体感速度が遅くなりました。冒頭の Speedtest とのようなインターネット接続実効速度テスト等を実施すると、速度自体は十分に出ているようです（iPhone 7 で 150Mbps〜200Mbps 程度）。しかし、以前と比べて「体感的に遅い」と感じるのは確かです。たとえば、iPhone でアプリ起動時にインターネット接続するアプリ[^1]など、アプリの起動自体は速いものの、その後の読み込みが遅いなど、いわゆる「パケ詰まり」のような状態が発生している状態です。

[^1]&#x3A; たとえば、Flipboard などのニュース系アプリ。

原因がはっきりと判明していませんが、AirMac の設定を見直すことで、同ワイヤレスルーターを経由してインターネット接続しているデバイスの体感速度が大幅に向上したためその方法を記しておきます。

### IPv6 の無効化（リンクローカルのみ有効）

設定した項目は「IPv6」の無効化です。最近のトレンドから思い切り外れた方法ですが、「IPv6 の構成」を「自動」から「リンクローカルのみ」（ローカルネットワークでのみ IPv6 を使用した通信を行う）に変更しました。すると、前述の「パケ詰まり」（パケットが滞留している状態）の感覚から解放されました。これが原因と断定できるものではありませんが、参考までに方法をご紹介します。考えられる原因としては以下のようなものでしょうか。

-   IPv6 未対応機器と対応機器を同時に AirMac へ接続している
-   IEEE802.11ac 未対応機器と対応機器を同時に AirMac へ接続している（Mixed モードで運用している）
-   AirMac をルーターモードではなく、ブリッジモードで運用している
-   2.4GHz 帯（IEEE802.11n only）と 5GHz 帯のデュアルバンドで運用している
-   MTU（Maximum Transmission Unit：1 回に通信できる最大の量）の問題。ISP によっては、適切な MTU へ変更することでパフォーマンス向上を期待できます

### AirMac ユーティリティで AirMac ベースステーションの設定を変更する

AirMac ユーティリティを開きます。以下は、Mac の画面での説明ですが、App Store から提供されている「AirMac ユーティリティ」を使用すれば、iPhone から変更することもできます。

![](/uploads/2018/01/180116-5a5e8039e78cd.png)

AirMac ベースステーションに接続（接続するためには、事前に設定したパスワード入力が必要です）し、「インターネット」タブを開きます。なお、自宅では AirMac ベースステーションは静的 IP アドレスにより運営しています。「インターネットオプション」をクリックします。

![](/uploads/2018/01/180116-5a5e80a09da6d.png)

デフォルトでは「IPv6 の構成」が「自動」となっています。通常はデフォルトのままで問題ないと思いますが、今回は「リンクローカルのみ」に変更します。IPv6 は、デフォルトで「ネイティブ」モード、即ち通信したい機器同士が直接 IPv6 アドレスで通信を行うモードになっています。「トンネル」モード[^2]を使用すれば改善が見られるかもしれません。もちろん、相手側が IPv6 に対応していない場合は、従来通り IPv4 で通信が行われます。

[^2]&#x3A; 通信したい機器同士が直接 IPv6 アドレスで通信を行うが、それまでの過程は IPv4 ネットワーク経由で行う（適切なルーティング等が行われる）

![](/uploads/2018/01/180116-5a5e80432ec39.png)

上図が「リンクローカルのみ」に変更した状態です。この状態に変更し「アップデート」することで体感的に読み込みが遅くなるといった問題は改善されました。ただし、根本的な原因解明には至っていないため引き続き調査は行おうと思っています。
