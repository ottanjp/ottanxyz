---
author: ottan
date: 2017-06-25 06:49:19+00:00
draft: false
title: 外出先のiPhoneやiPadから自宅のMacに接続する方法
type: post
slug: remote-connect-mac-iphone-ipad-5999
categories:
  - iPhone
  - Mac
tags:
  - Tips
---

![](/uploads/2017/06/170625-594f2a0e6ce0b.jpg)

外出先でiPhoneやiPad（以下、iOSデバイス）から自宅のMacに接続する方法をご紹介します。なお、iOSデバイスから接続するためには、VNC（Virtual Network Computing）プロトコルに対応したクライアントが必要です。また、外出先から自宅に接続するためには、インターネット接続に使用しているルーター等のグローバルIPアドレス、およびポートフォワーディングの設定が必要です。自宅で使用している機種でその方法の一例をご紹介します。

## 外出先から自宅のMacに接続する方法

大まかな流れとしては、以下の通りです。

1.  同一のWi-FiネットワークからVNCクライアントを介して接続できることを確認する
2.  インターネット接続用ルーターのポートフォワーディングの設定を行う
3.  VNCクライアント側に接続用の設定を実施する

### 自宅の同一Wi-Fiネットワークから接続する

まずは、接続したいMacとiOSデバイスを同一のWi-Fiネットワークに接続して、iOSデバイスからMacに接続できるかどうかを試してみましょう。Bonjourと呼ばれる、MacやiOSデバイスで動作するサービスを介して、自動的にiOSデバイスからMacを検出できるため、同一のWi-Fiネットワークから接続する場合は非常に簡単です。

![](/uploads/2017/06/170625-594f2a2d60c40.png)

接続先のMacのシステム環境設定を開き「共有」をクリックします。

![](/uploads/2017/06/170625-594f2a4d50820.png)

「画面共有」のチェックをオンにします。

### VNCクライアントのダウンロード

続いて、iOSデバイスにVNCクライアントをダウンロードします。App StoreではさまざまなVNCクライアントが用意されています。また、大抵のVNCクライアントは上記のBonjourにも対応しています。ここでは、私が使用している「VNC Viewer」を使用します。

{{< itunes 352019548 >}}

アプリのダウンロードが完了したら起動します。チュートリアルが表示されますので、画面のウィザードにしたがって進めます。

![](/uploads/2017/06/170625-594f2a8f4f00c.png)

左上のメニューアイコンをタップします。一覧から「Bonjour」をタップします。「Bonjour」では、同一の Wi-Fi ネットワークに接続しているMacを自動検出できます。Mac側でBonjourサービスを有効化する必要があります。デフォルトでは有効になっています。

![](/uploads/2017/06/170625-594f2a9528726.png)

一覧に、システム環境設定で「画面共有」のチェックボックスをオンにしたMacが表示されます。ここに表示される名称は、システム環境設定の「共有」で変更できます。一覧に表示されたMacの名称をタップします。

![](/uploads/2017/06/170625-594f2a9b4025b.png)

画面共有を介して接続する場合、通信は暗号化されていないため注意が必要である旨の警告が表示されます。次回以降、警告を表示しないようにするためには「Warn me every time」をオフにします。右上の「Continue」をタップします。

![](/uploads/2017/06/170625-594f2aa139548.png)

Macにログインするためのアカウント情報を入力します。アカウントは、画面共有を介してログインが許可されているユーザを選択する必要があります。デフォルトでは「Administrators」グループに所属するユーザ（管理者ユーザ）のみが接続できますが、Mac側の「システム環境設定」で特定のユーザに限定するなど、設定を変更できます。「Remember Password」をオンにしておくと、次回以降、アカウント情報の入力せず接続できるようになります。逆に言えば、誰でもこのアプリからMacへアクセスできるようになってしまうため注意が必要です。

![](/uploads/2017/06/170625-594f2aa814bb0.png)

Macのデスクトップが表示されたら無事接続完了です。「VNC Viewer」の詳細な使用方法については、ここでは割愛します。「×」アイコンをタップしていったん切断します。

### 外出先から自宅のMacに接続するための設定

自宅の同一Wi-FiネットワークからBonjourによりMacに接続することの確認ができたら、外出先から接続するための準備を始めましょう。

#### グローバルIPアドレスとプライベートIPアドレス

IPアドレス（以降、IPアドレスとはIPv4をさす）は、インターネットへ接続するために必要ですが、IPアドレスの数は有限です。そのため、インターネットに接続する個々のデバイスに一意の IPアドレスを割り当ててしまうと、IPアドレスがすぐに枯渇しています。IP アドレスは、インターネットに接続するすべてのデバイスで固有である必要があります。

IPアドレスは通常、自宅のMacには「プライベート IP アドレス」と呼ばれる自宅だけで使用できるIPアドレスが（ルーターのDHCP等の機能によって自動的に）固有に割り当てられています。インターネットに接続する際には、ルーターがこの「プライベートIPアドレス」を「グローバルIPアドレス」に変換して、接続することになります。つまり、インターネット側から見ると、家庭内のすべてのインターネット機器は通常1つの「グローバルIPアドレス」を共有して使用することになります。

そのため、外出先から自宅のMacに接続するためには、インターネットに接続するための「グローバルIPアドレス」経由で、家庭内の「プライベートIPアドレス」に接続する必要があります。しかし、家庭内の「プライベートIPアドレス」から「グローバルIPアドレス」経由でインターネットに接続する機器は前述の通り複数あります。「グローバルIPアドレス」経由で家庭内の機器へアクセスする際に、「グローバルIPアドレス」を接続したい機器の「プライベートIPアドレス」にルーターによって変換してもらう必要があります。

#### インターネット接続用ルーターの設定

今回は、NURO光契約時に同梱されている「F660T」に対する設定をご紹介します。その他の機器についてはお使いの機種の取扱説明書等をご覧ください。

まず、ブラウザ等からルーターの設定画面に接続します。通常は、ルーターのIPアドレスをブラウザのアドレス欄に入力することで設定画面を開くことができます。ルーターのIPアドレスがわからない場合は、iPhoneやMacのWi-Fiネットワークの設定等から確認できます。

![](/uploads/2017/06/170625-594f52896053b.png)

iPhoneの場合、「設定」→「Wi-Fi」から接続しているSSIDを選択して、「ルーター」のIPアドレスを確認できます。

![](/uploads/2017/06/170625-594f52f41b92c.png)

お使いのルーターの設定から「ポートフォワーディング」と呼ばれる設定を探してください。「ポートフォワーディング」とは、外出先からルーターのグローバルIPアドレス、およびあらかじめ設定した任意のポートへアクセスした際に、内部のプライベートIPアドレスへ変換するための設定です。設定した「グローバルIPアドレス」の「ポート」番号にアクセスすると、内部の「プライベートIPアドレス」の「ポート」番号に変換してくれるようになります。

![](/uploads/2017/06/170625-594f53eb97e04.png)

VNCでは、「TCP」プロトコルの「5900」番のポートを使用します。そのため、ルーターのグローバルIPアドレス宛にアクセスした場合、内部のプライベートIPアドレスを持つ機器に対して「5900」番のポートにアクセスするように設定します。「F660T」の場合の設定例は以下の通りです。

| 項目           | 設定                                 |
| ------------ | ---------------------------------- |
| 有効にする        | オン                                 |
| 名前           | VNC（任意）                            |
| プロトコル        | TCP                                |
| （開始）外部ポート番号  | 8080（任意）                           |
| （終了）外部ポート番号  | （開始）外部ポート番号と同一の番号                  |
| 内部ホストのIPアドレス | 192.168.1.12（接続するMacのプライベートIPアドレス） |
| （開始）内部ポート番号  | 5900                               |
| （終了）内部ポート番号  | 5900                               |

上記の設定を有効にすることにより、`<グローバルIPアドレス>:8080`にアクセスすると、自動的に`192.168.1.12:5900`に接続されます。このように「グローバルIPアドレス」と「ポート」から、「プライベートIPアドレス」と「ポート」宛への通信に変換する仕組みを「ポートフォワーディング」と呼びます。なお、グローバルIPアドレスはルーターのインターネット接続情報等から確認できます。

![](/uploads/2017/06/170625-594f56001ff20.png)

### VNCクライアント側の設定

続いて、iOSデバイス側のVNCクライアントの設定を行います。「VNC Viewer」の場合、メニューの「Address Book」を開きます。

![](/uploads/2017/06/170625-594f568c47afa.png)

右上の「+」アイコンをタップします。

![](/uploads/2017/06/170625-594f56b50a892.png)

「Address」に、`<グローバルIPアドレス>:8080`、「Name」に任意の名称（たとえば、「自宅のiMac」等わかりやすい名前）を設定します。グローバルIPアドレスは、事前にルーターで確認したIPアドレスを、「8080」はポートフォワーディングにおいて設定した「外部ポート番号」です。この「外部ポート番号」は適宜設定した値に更新してください。

### VNCクライアントから自宅のMacに接続する

では、実際に外出先から自宅のMacに接続できるか確認してみてください。iOSデバイスとMacが同一のWi-Fiネットワーク上に接続されている場合、グローバルIPアドレス宛の通信によるポートフォワーディングはできません。iOSデバイスのWi-Fiをきり4G状態にする、もしくは接続先のMacとは別のWi-Fiネットワーク等に接続してから接続してください。

![](/uploads/2017/06/170625-594f58f3e0f66.png)

「Connect」をタップし、Bonjourの時と同様の警告画面が表示され、システム環境設定の画面共有でログインを許可したアカウントでログインできれば接続は無事完了しています。

## 注意点

外出先から自宅のMacに接続する場合の注意点があります。「グローバルIPアドレス」は通常インターネット接続プロバイダー（私の場合は「NURO光」）から割り当てられますが、「グローバルIPアドレス」は固定ではないということです。そのため、グローバルIPアドレスが変更されれば、上記のルーターやVNCクライアントの設定は無効になります。ルーター等の再起動を行い、うまく接続できなかった場合は、グローバル IP アドレスを見直してみてください。

上記の問題を回避するために、DDNS（Dynamic DNS）と呼ばれるサービスを使用して動的に名前解決する（ドメイン名からグローバルIPアドレスへ変更するサービス）方法等が用意されています。外出先から自宅のMacに接続するだけであればこのような方法を取らなくても十分かと思います。なお、固定のグローバルIPアドレスを提供しているインターネット接続プロバイダーもありますが、通常は有償のサービスです。

![](/uploads/2017/06/170625-594f593b33996.png)

また、Macがスリープ状態になっている場合、外出先から接続できません。そのような場合には、「システム環境設定」の「省エネルギー」で「ネットワークアクセスによるスリープ解除」を設定しておきます。そうすることで、Macに対するネットワークアクセスがあった場合には、自動的にスリープが解除されるようになります。

## まとめ

外出先のiPhoneやiPadから、自宅のMacに接続する方法をご紹介しました。macOSに搭載されている標準の機能を使用するだけで接続できるのでとても便利ですね。ご質問等ありましたら、メニューの「Contacts」または[@ottanxyz](https://twitter.com/ottanxyz)、コメント欄でお待ちしています。
