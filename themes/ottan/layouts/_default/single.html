{{ define "header" }}
{{ partial "site-header.html" . }}
{{ end }}

{{ define "description"}}
<meta name="description" content="{{ .Summary }}" />
{{ end }}

{{ define "header-description" }}
<meta name="description" content="{{ .Summary }}..." />
<meta property="og:description" content="{{ .Summary }}..." />
<meta name="twitter:description" content="{{ .Summary }}..." />
<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" | safeHTML }}">
{{ range .Params.tags }}
<meta property="og:article:tag" content="{{ . }}" />
{{ end }}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@{{ .Site.Params.twitter }}" />
<meta name="twitter:creator" content="@{{ .Site.Params.twitter }}" />
<meta name="twitter:title" content="{{ .Title }}" />
<meta name="twitter:url" content="{{ .Permalink }}" />
{{ end }}

{{ define "header-image" }}
{{ $eyecatch_image := findRE "<img.*?src=([^>]*)?>" .Content 1 }}
{{ range $eyecatch_image }}
<meta property="og:image" content="{{ . | replaceRE ".*src=\"([^\"]+)\".*" "$1" | absURL }}">
<meta property="twitter:image" content="{{ . | replaceRE ".*src=\"([^\"]+)\".*" "$1" | absURL }}">
{{ end }}
{{ end }}

{{ define "main" }}

{{- partial "hero" . -}}

<section class="page">
	<div class="container">
		<div class="post-content">
			<div class="post-tags">
				{{ range .Params.tags }}
					<a class="button is-rounded" href="/tags/{{ . | urlize }}">#{{- . -}}</a>
				{{ end }}
			</div>
			<div class="post-content__inner">
				<div class="content markdown-body">
					{{ .Content | safeHTML }}
				</div>
			</div>
		</div>

		{{ partial "social-share.html" . }}

		<hr>
		<div class="comments" id="comments">
		{{ template "_internal/disqus.html" . }}  
		</div>

	</div>
  </section>

  {{ partial "related-posts.html" . }}

{{ end }}
